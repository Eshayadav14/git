const handleSaveClick = async (updatedAddress: Address) => {
  let resolvedResult;
  try {
    resolvedResult = await dispatch(
      getResolvedAddressAction({
        address: {
          ...updatedAddress,
          Id: selectedAddress?.Id || updatedAddress.Id,
        },
        isAuthenticated: user,
      })
    ).unwrap();
  } catch (error) {
    return;
  }

  if (!resolvedResult) {
    setEnteredAddress(updatedAddress);
    setShowVerifyModal(true);
  } else if (resolvedResult.ResolvedAddress) {
    setEnteredAddress(updatedAddress);
    setShowSuggestedModal(true);
  } else {
    const refreshedList = await dispatch(getShippingAddressAction()).unwrap();
    const updatedShippingAddresses = refreshedList?.data?.ShippingAddresses || [];

    // This ensures the actual updated address replaces the old one
    setUserShippingAddresses(updatedShippingAddresses);
    setAddressData(updatedShippingAddresses);
    setSelectedAddress(null);
  }
};